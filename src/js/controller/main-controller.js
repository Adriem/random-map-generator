var setupToggleable,
  hasProp = {}.hasOwnProperty;

$(document).ready(function() {
  var canvas, controls, drawMap, drawStepByStep, generateMap, key, map, properties, value;
  canvas = new CanvasController('canvas');
  map = null;
  properties = {
    tilesPerUnit: new NumericInput('tilesPerUnit', 'Tiles per unit', 1),
    wallStyle: new SelectInput('wallStyle', "Wall style", wallStyle),
    drawGrid: new ToggleInput('drawGrid', "Draw grid"),
    debugMode: new ToggleInput('debugMode', "Show debug info", true)
  };
  controls = {
    mapSize: new NumericInput('mapSize', 'Map size (units)', 5),
    numberOfRooms: new NumericInput('numberOfRooms', 'Number of rooms', 1),
    initialRoomW: new NumericInput('initialRoomW', 'Initial room width', 1),
    initialRoomH: new NumericInput('initialRoomH', 'Initial room height', 1),
    minRoomSize: new NumericInput('minRoomSize', 'Min. room size', 1),
    maxRoomSize: new NumericInput('maxRoomSize', 'Max. room size', 1)
  };
  generateMap = function() {
    var steps;
    steps = [];
    map = generate(controls.numberOfRooms.get(), {
      width: controls.mapSize.get(),
      height: controls.mapSize.get(),
      initialRoomWidth: controls.initialRoomW.get(),
      initialRoomHeight: controls.initialRoomH.get(),
      minRoomSize: controls.minRoomSize.get(),
      maxRoomSize: controls.maxRoomSize.get()
    }, function(map, step) {
      console.log("Step #" + step + ": ", map.roomList);
      return steps.push(map);
    });
    return drawStepByStep(canvas, steps);
  };
  drawMap = function(canvas, map) {
    var tilemap;
    tilemap = map.getTilemap(properties.tilesPerUnit.get());
    return canvas.drawMap(tilemap, properties.drawGrid.get(), properties.wallStyle.get());
  };
  drawStepByStep = function(canvas, steps, i) {
    if (i == null) {
      i = 0;
    }
    drawMap(canvas, steps.shift());
    if (steps.length > 0) {
      return setTimeout((function() {
        return drawStepByStep(canvas, steps);
      }), 250);
    }
  };
  for (key in properties) {
    if (!hasProp.call(properties, key)) continue;
    value = properties[key];
    $('#renderer-controls').append(value.html);
  }
  for (key in controls) {
    if (!hasProp.call(controls, key)) continue;
    value = controls[key];
    $('#generator-controls').append(value.html);
  }
  $("#generate").click(generateMap);
  $('[data-togle="tooltip"]').tooltip();
  controls.mapSize.set(Defaults.MAP_SIZE);
  controls.numberOfRooms.set(Defaults.NUMBER_OF_ROOMS);
  controls.initialRoomW.set(Defaults.INITIAL_ROOM_WIDTH);
  controls.initialRoomH.set(Defaults.INITIAL_ROOM_HEIGHT);
  controls.minRoomSize.set(Defaults.MIN_ROOM_SIZE);
  controls.maxRoomSize.set(Defaults.MAX_ROOM_SIZE);
  properties.tilesPerUnit.set(Defaults.TILES_PER_UNIT);
  properties.wallStyle.set(2);
  properties.drawGrid.set(true);
  properties.debugMode.set(false);
  properties.tilesPerUnit.setListener(function() {
    return drawMap(canvas, map);
  });
  properties.wallStyle.setListener(function() {
    return drawMap(canvas, map);
  });
  properties.drawGrid.setListener(function() {
    return drawMap(canvas, map);
  });
  properties.drawGrid.setListener(function() {
    return drawMap(canvas, map);
  });
  return generateMap();
});

setupToggleable = function(toggle, input, refVal, disabledVal) {
  if (disabledVal == null) {
    disabledVal = 0;
  }
  $(input).val(refVal);
  if (refVal > disabledVal) {
    $(toggle).prop("checked", "on");
  } else {
    $(toggle).removeProp("checked", "on");
  }
  return $(toggle).change(function() {
    if ($(toggle).prop("checked")) {
      return $(input).removeAttr("disabled", "");
    } else {
      return $(input).attr("disabled", "");
    }
  });
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXIvbWFpbi1jb250cm9sbGVyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLGVBQUE7RUFBQTs7QUFBQSxDQUFBLENBQUUsUUFBRixDQUFXLENBQUMsS0FBWixDQUFrQixTQUFBO0FBRWhCLE1BQUE7RUFBQSxNQUFBLEdBQWEsSUFBQSxnQkFBQSxDQUFpQixRQUFqQjtFQUNiLEdBQUEsR0FBTTtFQUdOLFVBQUEsR0FDRTtJQUFBLFlBQUEsRUFBbUIsSUFBQSxZQUFBLENBQWEsY0FBYixFQUE2QixnQkFBN0IsRUFBK0MsQ0FBL0MsQ0FBbkI7SUFDQSxTQUFBLEVBQW1CLElBQUEsV0FBQSxDQUFZLFdBQVosRUFBeUIsWUFBekIsRUFBdUMsU0FBdkMsQ0FEbkI7SUFFQSxRQUFBLEVBQW1CLElBQUEsV0FBQSxDQUFZLFVBQVosRUFBd0IsV0FBeEIsQ0FGbkI7SUFHQSxTQUFBLEVBQW1CLElBQUEsV0FBQSxDQUFZLFdBQVosRUFBeUIsaUJBQXpCLEVBQTRDLElBQTVDLENBSG5COztFQU1GLFFBQUEsR0FDRTtJQUFBLE9BQUEsRUFBb0IsSUFBQSxZQUFBLENBQWEsU0FBYixFQUF3QixrQkFBeEIsRUFBNEMsQ0FBNUMsQ0FBcEI7SUFDQSxhQUFBLEVBQW9CLElBQUEsWUFBQSxDQUFhLGVBQWIsRUFBOEIsaUJBQTlCLEVBQWlELENBQWpELENBRHBCO0lBRUEsWUFBQSxFQUFvQixJQUFBLFlBQUEsQ0FBYSxjQUFiLEVBQTZCLG9CQUE3QixFQUFtRCxDQUFuRCxDQUZwQjtJQUdBLFlBQUEsRUFBb0IsSUFBQSxZQUFBLENBQWEsY0FBYixFQUE2QixxQkFBN0IsRUFBb0QsQ0FBcEQsQ0FIcEI7SUFJQSxXQUFBLEVBQW9CLElBQUEsWUFBQSxDQUFhLGFBQWIsRUFBNEIsZ0JBQTVCLEVBQThDLENBQTlDLENBSnBCO0lBS0EsV0FBQSxFQUFvQixJQUFBLFlBQUEsQ0FBYSxhQUFiLEVBQTRCLGdCQUE1QixFQUE4QyxDQUE5QyxDQUxw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Q0FBQyxJQUFULENBQWMsVUFBZCxFQUEwQixFQUExQixFQUhGOztFQURlLENBQWpCO0FBUmdCIiwiZmlsZSI6ImNvbnRyb2xsZXIvbWFpbi1jb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkgKCkgLT5cclxuXHJcbiAgY2FudmFzID0gbmV3IENhbnZhc0NvbnRyb2xsZXIgJ2NhbnZhcydcclxuICBtYXAgPSBudWxsXHJcblxyXG4gICMgUkVOREVSRVIgUFJPUEVSVElFU1xyXG4gIHByb3BlcnRpZXMgPVxyXG4gICAgdGlsZXNQZXJVbml0IDogbmV3IE51bWVyaWNJbnB1dCgndGlsZXNQZXJVbml0JywgJ1RpbGVzIHBlciB1bml0JywgMSlcclxuICAgIHdhbGxTdHlsZSAgICA6IG5ldyBTZWxlY3RJbnB1dCgnd2FsbFN0eWxlJywgXCJXYWxsIHN0eWxlXCIsIHdhbGxTdHlsZSlcclxuICAgIGRyYXdHcmlkICAgICA6IG5ldyBUb2dnbGVJbnB1dCgnZHJhd0dyaWQnLCBcIkRyYXcgZ3JpZFwiKVxyXG4gICAgZGVidWdNb2RlICAgIDogbmV3IFRvZ2dsZUlucHV0KCdkZWJ1Z01vZGUnLCBcIlNob3cgZGVidWcgaW5mb1wiLCB0cnVlKVxyXG5cclxuICAjIEdFTkVSQVRPUiBDT05UUk9MU1xyXG4gIGNvbnRyb2xzID1cclxuICAgIG1hcFNpemUgICAgICAgOiBuZXcgTnVtZXJpY0lucHV0KCdtYXBTaXplJywgJ01hcCBzaXplICh1bml0cyknLCA1KVxyXG4gICAgbnVtYmVyT2ZSb29tcyA6IG5ldyBOdW1lcmljSW5wdXQoJ251bWJlck9mUm9vbXMnLCAnTnVtYmVyIG9mIHJvb21zJywgMSlcclxuICAgIGluaXRpYWxSb29tVyAgOiBuZXcgTnVtZXJpY0lucHV0KCdpbml0aWFsUm9vbVcnLCAnSW5pdGlhbCByb29tIHdpZHRoJywgMSlcclxuICAgIGluaXRpYWxSb29tSCAgOiBuZXcgTnVtZXJpY0lucHV0KCdpbml0aWFsUm9vbUgnLCAnSW5pdGlhbCByb29tIGhlaWdodCcsIDEpXHJcbiAgICBtaW5Sb29tU2l6ZSAgIDogbmV3IE51bWVyaWNJbnB1dCgnbWluUm9vbVNpemUnLCAnTWluLiByb29tIHNpemUnLCAxKVxyXG4gICAgbWF4Um9vbVNpemUgICA6IG5ldyBOdW1lcmljSW5wdXQoJ21heFJvb21TaXplJywgJ01heC4gcm9vbSBzaXplJywgMSlcclxuXHJcbiAgIyBGVU5DVElPTiBERUZJTklUSU9OXHJcbiAgZ2VuZXJhdGVNYXAgPSAoKSAtPlxyXG4gICAgc3RlcHMgPSBbXVxyXG4gICAgbWFwID0gZ2VuZXJhdGUoXHJcbiAgICAgIGNvbnRyb2xzLm51bWJlck9mUm9vbXMuZ2V0KCksXHJcbiAgICAgIHtcclxuICAgICAgICB3aWR0aDogY29udHJvbHMubWFwU2l6ZS5nZXQoKVxyXG4gICAgICAgIGhlaWdodDogY29udHJvbHMubWFwU2l6ZS5nZXQoKVxyXG4gICAgICAgIGluaXRpYWxSb29tV2lkdGg6IGNvbnRyb2xzLmluaXRpYWxSb29tVy5nZXQoKVxyXG4gICAgICAgIGluaXRpYWxSb29tSGVpZ2h0OiBjb250cm9scy5pbml0aWFsUm9vbUguZ2V0KClcclxuICAgICAgICBtaW5Sb29tU2l6ZTogY29udHJvbHMubWluUm9vbVNpemUuZ2V0KClcclxuICAgICAgICBtYXhSb29tU2l6ZTogY29udHJvbHMubWF4Um9vbVNpemUuZ2V0KClcclxuICAgICAgfSxcclxuICAgICAgKG1hcCwgc3RlcCkgLT5cclxuICAgICAgICBjb25zb2xlLmxvZyhcIlN0ZXAgIyN7c3RlcH06IFwiLCBtYXAucm9vbUxpc3QpXHJcbiAgICAgICAgc3RlcHMucHVzaCBtYXBcclxuICAgIClcclxuICAgIGRyYXdTdGVwQnlTdGVwIGNhbnZhcywgc3RlcHNcclxuICAgICMgZHJhd01hcCBjYW52YXMsIG1hcFxyXG5cclxuICBkcmF3TWFwID0gKGNhbnZhcywgbWFwKSAtPlxyXG4gICAgdGlsZW1hcCA9IG1hcC5nZXRUaWxlbWFwKHByb3BlcnRpZXMudGlsZXNQZXJVbml0LmdldCgpKVxyXG4gICAgY2FudmFzLmRyYXdNYXAodGlsZW1hcCwgcHJvcGVydGllcy5kcmF3R3JpZC5nZXQoKSwgcHJvcGVydGllcy53YWxsU3R5bGUuZ2V0KCkpXHJcblxyXG4gIGRyYXdTdGVwQnlTdGVwID0gKGNhbnZhcywgc3RlcHMsIGkgPSAwKSAtPlxyXG4gICAgZHJhd01hcCBjYW52YXMsIHN0ZXBzLnNoaWZ0KClcclxuICAgIHNldFRpbWVvdXQoKCgpIC0+IGRyYXdTdGVwQnlTdGVwKGNhbnZhcywgc3RlcHMpKSwgMjUwKSBpZiBzdGVwcy5sZW5ndGggPiAwXHJcblxyXG4gICMgQWRkIGNvbnRyb2xzIHRvIHRoZSBwYWdlXHJcbiAgJCgnI3JlbmRlcmVyLWNvbnRyb2xzJykuYXBwZW5kKHZhbHVlLmh0bWwpIGZvciBvd24ga2V5LCB2YWx1ZSBvZiBwcm9wZXJ0aWVzXHJcbiAgJCgnI2dlbmVyYXRvci1jb250cm9scycpLmFwcGVuZCh2YWx1ZS5odG1sKSBmb3Igb3duIGtleSwgdmFsdWUgb2YgY29udHJvbHNcclxuXHJcbiAgIyBCaW5kIGZ1bmN0aW9ucyB0byBidXR0b25zXHJcbiAgJChcIiNnZW5lcmF0ZVwiKS5jbGljayhnZW5lcmF0ZU1hcClcclxuXHJcbiAgIyBFbmFibGUgdG9vbHRpcHMgd2l0aCBib290c3RyYXBcclxuICAkKCdbZGF0YS10b2dsZT1cInRvb2x0aXBcIl0nKS50b29sdGlwKClcclxuXHJcbiAgIyBTZXQgZGVmYXVsdCB2YWx1ZXMgdG8gdGhlIGlucHV0c1xyXG4gIGNvbnRyb2xzLm1hcFNpemUuc2V0KERlZmF1bHRzLk1BUF9TSVpFKVxyXG4gIGNvbnRyb2xzLm51bWJlck9mUm9vbXMuc2V0KERlZmF1bHRzLk5VTUJFUl9PRl9ST09NUylcclxuICBjb250cm9scy5pbml0aWFsUm9vbVcuc2V0KERlZmF1bHRzLklOSVRJQUxfUk9PTV9XSURUSClcclxuICBjb250cm9scy5pbml0aWFsUm9vbUguc2V0KERlZmF1bHRzLklOSVRJQUxfUk9PTV9IRUlHSFQpXHJcbiAgY29udHJvbHMubWluUm9vbVNpemUuc2V0KERlZmF1bHRzLk1JTl9ST09NX1NJWkUpXHJcbiAgY29udHJvbHMubWF4Um9vbVNpemUuc2V0KERlZmF1bHRzLk1BWF9ST09NX1NJWkUpXHJcblxyXG4gIHByb3BlcnRpZXMudGlsZXNQZXJVbml0LnNldChEZWZhdWx0cy5USUxFU19QRVJfVU5JVClcclxuICBwcm9wZXJ0aWVzLndhbGxTdHlsZS5zZXQoMilcclxuICBwcm9wZXJ0aWVzLmRyYXdHcmlkLnNldCh0cnVlKVxyXG4gIHByb3BlcnRpZXMuZGVidWdNb2RlLnNldChmYWxzZSlcclxuXHJcbiAgIyBTZXQgbGlzdGVuZXIgdG8gYXV0by11cGRhdGVkIGlucHV0c1xyXG4gIHByb3BlcnRpZXMudGlsZXNQZXJVbml0LnNldExpc3RlbmVyKCgpIC0+IGRyYXdNYXAoY2FudmFzLCBtYXApKVxyXG4gIHByb3BlcnRpZXMud2FsbFN0eWxlLnNldExpc3RlbmVyKCgpIC0+IGRyYXdNYXAoY2FudmFzLCBtYXApKVxyXG4gIHByb3BlcnRpZXMuZHJhd0dyaWQuc2V0TGlzdGVuZXIoKCkgLT4gZHJhd01hcChjYW52YXMsIG1hcCkpXHJcbiAgcHJvcGVydGllcy5kcmF3R3JpZC5zZXRMaXN0ZW5lcigoKSAtPiBkcmF3TWFwKGNhbnZhcywgbWFwKSlcclxuXHJcbiAgIyBHZW5lcmF0ZSBtYXAgb24gcGFnZSBsb2FkXHJcbiAgZ2VuZXJhdGVNYXAoKVxyXG5cclxuXHJcblxyXG5cclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuIyBMRUdBQ1kgOlxcXHJcbiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbnNldHVwVG9nZ2xlYWJsZSA9ICh0b2dnbGUsIGlucHV0LCByZWZWYWwsIGRpc2FibGVkVmFsID0gMCkgLT5cclxuICAjIFNldCBkZWZhdWx0IHZhbHVlXHJcbiAgJChpbnB1dCkudmFsKHJlZlZhbClcclxuICBpZiByZWZWYWwgPiBkaXNhYmxlZFZhbFxyXG4gICAgJCh0b2dnbGUpLnByb3AoXCJjaGVja2VkXCIsIFwib25cIilcclxuICBlbHNlXHJcbiAgICAkKHRvZ2dsZSkucmVtb3ZlUHJvcChcImNoZWNrZWRcIiwgXCJvblwiKVxyXG4gICMgRGlzYWJsZSBmaWVsZCBvbiBjaGVja2JveCBkaXNhYmxlXHJcbiAgJCh0b2dnbGUpLmNoYW5nZSAtPlxyXG4gICAgaWYgJCh0b2dnbGUpLnByb3AoXCJjaGVja2VkXCIpXHJcbiAgICAgICQoaW5wdXQpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiLCBcIlwiKVxyXG4gICAgZWxzZVxyXG4gICAgICAkKGlucHV0KS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJcIilcclxuIl19