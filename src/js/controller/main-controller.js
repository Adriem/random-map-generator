var setupToggleable,
  hasProp = {}.hasOwnProperty;

$(document).ready(function() {
  var canvas, controls, drawMap, drawStepByStep, generateMap, key, map, properties, value;
  canvas = new CanvasController('canvas');
  map = null;
  properties = {
    tilesPerUnit: new NumericInput('tilesPerUnit', 'Tiles per unit', 1),
    wallStyle: new SelectInput('wallStyle', "Wall style", wallStyle),
    drawGrid: new ToggleInput('drawGrid', "Draw grid"),
    debugMode: new ToggleInput('debugMode', "Show debug info", true)
  };
  controls = {
    mapSize: new NumericInput('mapSize', 'Map size (units)', 5),
    numberOfRooms: new NumericInput('numberOfRooms', 'Number of rooms', 1),
    initialRoomW: new NumericInput('initialRoomW', 'Initial room width', 1),
    initialRoomH: new NumericInput('initialRoomH', 'Initial room height', 1),
    minRoomSize: new NumericInput('minRoomSize', 'Min. room size', 1),
    maxRoomSize: new NumericInput('maxRoomSize', 'Max. room size', 1)
  };
  generateMap = function() {
    var steps;
    steps = [];
    map = generate(controls.numberOfRooms.get(), {
      width: controls.mapSize.get(),
      height: controls.mapSize.get(),
      initialRoomWidth: controls.initialRoomW.get(),
      initialRoomHeight: controls.initialRoomH.get(),
      minRoomSize: controls.minRoomSize.get(),
      maxRoomSize: controls.maxRoomSize.get(),
      ratioRestriction: 0.5
    }, function(map, step) {
      console.log("Step #" + step + ": ", map.roomList);
      return steps.push(map);
    });
    return drawStepByStep(canvas, steps);
  };
  drawMap = function(canvas, map) {
    var tilemap;
    tilemap = map.getTilemap(properties.tilesPerUnit.get());
    return canvas.drawMap(tilemap, properties.drawGrid.get(), properties.wallStyle.get());
  };
  drawStepByStep = function(canvas, steps, i) {
    if (i == null) {
      i = 0;
    }
    drawMap(canvas, steps.shift());
    if (steps.length > 0) {
      return setTimeout((function() {
        return drawStepByStep(canvas, steps);
      }), 250);
    }
  };
  for (key in properties) {
    if (!hasProp.call(properties, key)) continue;
    value = properties[key];
    $('#renderer-controls').append(value.html);
  }
  for (key in controls) {
    if (!hasProp.call(controls, key)) continue;
    value = controls[key];
    $('#generator-controls').append(value.html);
  }
  $("#generate").click(generateMap);
  $('[data-togle="tooltip"]').tooltip();
  controls.mapSize.set(Defaults.MAP_SIZE);
  controls.numberOfRooms.set(Defaults.NUMBER_OF_ROOMS);
  controls.initialRoomW.set(Defaults.INITIAL_ROOM_WIDTH);
  controls.initialRoomH.set(Defaults.INITIAL_ROOM_HEIGHT);
  controls.minRoomSize.set(Defaults.MIN_ROOM_SIZE);
  controls.maxRoomSize.set(Defaults.MAX_ROOM_SIZE);
  properties.tilesPerUnit.set(Defaults.TILES_PER_UNIT);
  properties.wallStyle.set(2);
  properties.drawGrid.set(true);
  properties.debugMode.set(false);
  properties.tilesPerUnit.setListener(function() {
    return drawMap(canvas, map);
  });
  properties.wallStyle.setListener(function() {
    return drawMap(canvas, map);
  });
  properties.drawGrid.setListener(function() {
    return drawMap(canvas, map);
  });
  properties.drawGrid.setListener(function() {
    return drawMap(canvas, map);
  });
  return generateMap();
});

setupToggleable = function(toggle, input, refVal, disabledVal) {
  if (disabledVal == null) {
    disabledVal = 0;
  }
  $(input).val(refVal);
  if (refVal > disabledVal) {
    $(toggle).prop("checked", "on");
  } else {
    $(toggle).removeProp("checked", "on");
  }
  return $(toggle).change(function() {
    if ($(toggle).prop("checked")) {
      return $(input).removeAttr("disabled", "");
    } else {
      return $(input).attr("disabled", "");
    }
  });
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXIvbWFpbi1jb250cm9sbGVyLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLGVBQUE7RUFBQTs7QUFBQSxDQUFBLENBQUUsUUFBRixDQUFXLENBQUMsS0FBWixDQUFrQixTQUFBO0FBRWhCLE1BQUE7RUFBQSxNQUFBLEdBQWEsSUFBQSxnQkFBQSxDQUFpQixRQUFqQjtFQUNiLEdBQUEsR0FBTTtFQUdOLFVBQUEsR0FDRTtJQUFBLFlBQUEsRUFBbUIsSUFBQSxZQUFBLENBQWEsY0FBYixFQUE2QixnQkFBN0IsRUFBK0MsQ0FBL0MsQ0FBbkI7SUFDQSxTQUFBLEVBQW1CLElBQUEsV0FBQSxDQUFZLFdBQVosRUFBeUIsWUFBekIsRUFBdUMsU0FBdkMsQ0FEbkI7SUFFQSxRQUFBLEVBQW1CLElBQUEsV0FBQSxDQUFZLFVBQVosRUFBd0IsV0FBeEIsQ0FGbkI7SUFHQSxTQUFBLEVBQW1CLElBQUEsV0FBQSxDQUFZLFdBQVosRUFBeUIsaUJBQXpCLEVBQTRDLElBQTVDLENBSG5COztFQU1GLFFBQUEsR0FDRTtJQUFBLE9BQUEsRUFBb0IsSUFBQSxZQUFBLENBQWEsU0FBYixFQUF3QixrQkFBeEIsRUFBNEMsQ0FBNUMsQ0FBcEI7SUFDQSxhQUFBLEVBQW9CLElBQUEsWUFBQSxDQUFhLGVBQWIsRUFBOEIsaUJBQTlCLEVBQWlELENBQWpELENBRHBCO0lBRUEsWUFBQSxFQUFvQixJQUFBLFlBQUEsQ0FBYSxjQUFiLEVBQTZCLG9CQUE3QixFQUFtRCxDQUFuRCxDQUZwQjtJQUdBLFlBQUEsRUFBb0IsSUFBQSxZQUFBLENBQWEsY0FBYixFQUE2QixxQkFBN0IsRUFBb0QsQ0FBcEQsQ0FIcEI7SUFJQSxXQUFBLEVBQW9CLElBQUEsWUFBQSxDQUFhLGFBQWIsRUFBNEIsZ0JBQTVCLEVBQThDLENBQTlDLENBSnBCO0lBS0EsV0FBQSxFQUFvQixJQUFBLFlBQUEsQ0FBYSxhQUFiLEVBQTRCLGdCQUE1QixFQUE4QyxDQUE5QyxDQUxw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R0UsQ0FBQSxDQUFFLEtBQUYsQ0FBUSxDQUFDLElBQVQsQ0FBYyxVQUFkLEVBQTBCLEVBQTFCLEVBSEY7O0VBRGUsQ0FBakI7QUFSZ0IiLCJmaWxlIjoiY29udHJvbGxlci9tYWluLWNvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeSAoKSAtPlxyXG5cclxuICBjYW52YXMgPSBuZXcgQ2FudmFzQ29udHJvbGxlciAnY2FudmFzJ1xyXG4gIG1hcCA9IG51bGxcclxuXHJcbiAgIyBSRU5ERVJFUiBQUk9QRVJUSUVTXHJcbiAgcHJvcGVydGllcyA9XHJcbiAgICB0aWxlc1BlclVuaXQgOiBuZXcgTnVtZXJpY0lucHV0KCd0aWxlc1BlclVuaXQnLCAnVGlsZXMgcGVyIHVuaXQnLCAxKVxyXG4gICAgd2FsbFN0eWxlICAgIDogbmV3IFNlbGVjdElucHV0KCd3YWxsU3R5bGUnLCBcIldhbGwgc3R5bGVcIiwgd2FsbFN0eWxlKVxyXG4gICAgZHJhd0dyaWQgICAgIDogbmV3IFRvZ2dsZUlucHV0KCdkcmF3R3JpZCcsIFwiRHJhdyBncmlkXCIpXHJcbiAgICBkZWJ1Z01vZGUgICAgOiBuZXcgVG9nZ2xlSW5wdXQoJ2RlYnVnTW9kZScsIFwiU2hvdyBkZWJ1ZyBpbmZvXCIsIHRydWUpXHJcblxyXG4gICMgR0VORVJBVE9SIENPTlRST0xTXHJcbiAgY29udHJvbHMgPVxyXG4gICAgbWFwU2l6ZSAgICAgICA6IG5ldyBOdW1lcmljSW5wdXQoJ21hcFNpemUnLCAnTWFwIHNpemUgKHVuaXRzKScsIDUpXHJcbiAgICBudW1iZXJPZlJvb21zIDogbmV3IE51bWVyaWNJbnB1dCgnbnVtYmVyT2ZSb29tcycsICdOdW1iZXIgb2Ygcm9vbXMnLCAxKVxyXG4gICAgaW5pdGlhbFJvb21XICA6IG5ldyBOdW1lcmljSW5wdXQoJ2luaXRpYWxSb29tVycsICdJbml0aWFsIHJvb20gd2lkdGgnLCAxKVxyXG4gICAgaW5pdGlhbFJvb21IICA6IG5ldyBOdW1lcmljSW5wdXQoJ2luaXRpYWxSb29tSCcsICdJbml0aWFsIHJvb20gaGVpZ2h0JywgMSlcclxuICAgIG1pblJvb21TaXplICAgOiBuZXcgTnVtZXJpY0lucHV0KCdtaW5Sb29tU2l6ZScsICdNaW4uIHJvb20gc2l6ZScsIDEpXHJcbiAgICBtYXhSb29tU2l6ZSAgIDogbmV3IE51bWVyaWNJbnB1dCgnbWF4Um9vbVNpemUnLCAnTWF4LiByb29tIHNpemUnLCAxKVxyXG5cclxuICAjIEZVTkNUSU9OIERFRklOSVRJT05cclxuICBnZW5lcmF0ZU1hcCA9ICgpIC0+XHJcbiAgICBzdGVwcyA9IFtdXHJcbiAgICBtYXAgPSBnZW5lcmF0ZShcclxuICAgICAgY29udHJvbHMubnVtYmVyT2ZSb29tcy5nZXQoKSxcclxuICAgICAge1xyXG4gICAgICAgIHdpZHRoOiBjb250cm9scy5tYXBTaXplLmdldCgpXHJcbiAgICAgICAgaGVpZ2h0OiBjb250cm9scy5tYXBTaXplLmdldCgpXHJcbiAgICAgICAgaW5pdGlhbFJvb21XaWR0aDogY29udHJvbHMuaW5pdGlhbFJvb21XLmdldCgpXHJcbiAgICAgICAgaW5pdGlhbFJvb21IZWlnaHQ6IGNvbnRyb2xzLmluaXRpYWxSb29tSC5nZXQoKVxyXG4gICAgICAgIG1pblJvb21TaXplOiBjb250cm9scy5taW5Sb29tU2l6ZS5nZXQoKVxyXG4gICAgICAgIG1heFJvb21TaXplOiBjb250cm9scy5tYXhSb29tU2l6ZS5nZXQoKVxyXG4gICAgICAgIHJhdGlvUmVzdHJpY3Rpb246IDAuNVxyXG4gICAgICB9LFxyXG4gICAgICAobWFwLCBzdGVwKSAtPlxyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RlcCAjI3tzdGVwfTogXCIsIG1hcC5yb29tTGlzdClcclxuICAgICAgICBzdGVwcy5wdXNoIG1hcFxyXG4gICAgKVxyXG4gICAgZHJhd1N0ZXBCeVN0ZXAgY2FudmFzLCBzdGVwc1xyXG4gICAgIyBkcmF3TWFwIGNhbnZhcywgbWFwXHJcblxyXG4gIGRyYXdNYXAgPSAoY2FudmFzLCBtYXApIC0+XHJcbiAgICB0aWxlbWFwID0gbWFwLmdldFRpbGVtYXAocHJvcGVydGllcy50aWxlc1BlclVuaXQuZ2V0KCkpXHJcbiAgICBjYW52YXMuZHJhd01hcCh0aWxlbWFwLCBwcm9wZXJ0aWVzLmRyYXdHcmlkLmdldCgpLCBwcm9wZXJ0aWVzLndhbGxTdHlsZS5nZXQoKSlcclxuXHJcbiAgZHJhd1N0ZXBCeVN0ZXAgPSAoY2FudmFzLCBzdGVwcywgaSA9IDApIC0+XHJcbiAgICBkcmF3TWFwIGNhbnZhcywgc3RlcHMuc2hpZnQoKVxyXG4gICAgc2V0VGltZW91dCgoKCkgLT4gZHJhd1N0ZXBCeVN0ZXAoY2FudmFzLCBzdGVwcykpLCAyNTApIGlmIHN0ZXBzLmxlbmd0aCA+IDBcclxuXHJcbiAgIyBBZGQgY29udHJvbHMgdG8gdGhlIHBhZ2VcclxuICAkKCcjcmVuZGVyZXItY29udHJvbHMnKS5hcHBlbmQodmFsdWUuaHRtbCkgZm9yIG93biBrZXksIHZhbHVlIG9mIHByb3BlcnRpZXNcclxuICAkKCcjZ2VuZXJhdG9yLWNvbnRyb2xzJykuYXBwZW5kKHZhbHVlLmh0bWwpIGZvciBvd24ga2V5LCB2YWx1ZSBvZiBjb250cm9sc1xyXG5cclxuICAjIEJpbmQgZnVuY3Rpb25zIHRvIGJ1dHRvbnNcclxuICAkKFwiI2dlbmVyYXRlXCIpLmNsaWNrKGdlbmVyYXRlTWFwKVxyXG5cclxuICAjIEVuYWJsZSB0b29sdGlwcyB3aXRoIGJvb3RzdHJhcFxyXG4gICQoJ1tkYXRhLXRvZ2xlPVwidG9vbHRpcFwiXScpLnRvb2x0aXAoKVxyXG5cclxuICAjIFNldCBkZWZhdWx0IHZhbHVlcyB0byB0aGUgaW5wdXRzXHJcbiAgY29udHJvbHMubWFwU2l6ZS5zZXQoRGVmYXVsdHMuTUFQX1NJWkUpXHJcbiAgY29udHJvbHMubnVtYmVyT2ZSb29tcy5zZXQoRGVmYXVsdHMuTlVNQkVSX09GX1JPT01TKVxyXG4gIGNvbnRyb2xzLmluaXRpYWxSb29tVy5zZXQoRGVmYXVsdHMuSU5JVElBTF9ST09NX1dJRFRIKVxyXG4gIGNvbnRyb2xzLmluaXRpYWxSb29tSC5zZXQoRGVmYXVsdHMuSU5JVElBTF9ST09NX0hFSUdIVClcclxuICBjb250cm9scy5taW5Sb29tU2l6ZS5zZXQoRGVmYXVsdHMuTUlOX1JPT01fU0laRSlcclxuICBjb250cm9scy5tYXhSb29tU2l6ZS5zZXQoRGVmYXVsdHMuTUFYX1JPT01fU0laRSlcclxuXHJcbiAgcHJvcGVydGllcy50aWxlc1BlclVuaXQuc2V0KERlZmF1bHRzLlRJTEVTX1BFUl9VTklUKVxyXG4gIHByb3BlcnRpZXMud2FsbFN0eWxlLnNldCgyKVxyXG4gIHByb3BlcnRpZXMuZHJhd0dyaWQuc2V0KHRydWUpXHJcbiAgcHJvcGVydGllcy5kZWJ1Z01vZGUuc2V0KGZhbHNlKVxyXG5cclxuICAjIFNldCBsaXN0ZW5lciB0byBhdXRvLXVwZGF0ZWQgaW5wdXRzXHJcbiAgcHJvcGVydGllcy50aWxlc1BlclVuaXQuc2V0TGlzdGVuZXIoKCkgLT4gZHJhd01hcChjYW52YXMsIG1hcCkpXHJcbiAgcHJvcGVydGllcy53YWxsU3R5bGUuc2V0TGlzdGVuZXIoKCkgLT4gZHJhd01hcChjYW52YXMsIG1hcCkpXHJcbiAgcHJvcGVydGllcy5kcmF3R3JpZC5zZXRMaXN0ZW5lcigoKSAtPiBkcmF3TWFwKGNhbnZhcywgbWFwKSlcclxuICBwcm9wZXJ0aWVzLmRyYXdHcmlkLnNldExpc3RlbmVyKCgpIC0+IGRyYXdNYXAoY2FudmFzLCBtYXApKVxyXG5cclxuICAjIEdlbmVyYXRlIG1hcCBvbiBwYWdlIGxvYWRcclxuICBnZW5lcmF0ZU1hcCgpXHJcblxyXG5cclxuXHJcblxyXG4jIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4jIExFR0FDWSA6XFxcclxuIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuc2V0dXBUb2dnbGVhYmxlID0gKHRvZ2dsZSwgaW5wdXQsIHJlZlZhbCwgZGlzYWJsZWRWYWwgPSAwKSAtPlxyXG4gICMgU2V0IGRlZmF1bHQgdmFsdWVcclxuICAkKGlucHV0KS52YWwocmVmVmFsKVxyXG4gIGlmIHJlZlZhbCA+IGRpc2FibGVkVmFsXHJcbiAgICAkKHRvZ2dsZSkucHJvcChcImNoZWNrZWRcIiwgXCJvblwiKVxyXG4gIGVsc2VcclxuICAgICQodG9nZ2xlKS5yZW1vdmVQcm9wKFwiY2hlY2tlZFwiLCBcIm9uXCIpXHJcbiAgIyBEaXNhYmxlIGZpZWxkIG9uIGNoZWNrYm94IGRpc2FibGVcclxuICAkKHRvZ2dsZSkuY2hhbmdlIC0+XHJcbiAgICBpZiAkKHRvZ2dsZSkucHJvcChcImNoZWNrZWRcIilcclxuICAgICAgJChpbnB1dCkucmVtb3ZlQXR0cihcImRpc2FibGVkXCIsIFwiXCIpXHJcbiAgICBlbHNlXHJcbiAgICAgICQoaW5wdXQpLmF0dHIoXCJkaXNhYmxlZFwiLCBcIlwiKVxyXG4iXX0=